name: font-install
type: shell
commands:
  - "echo Installing Nerdfonts..."
  - "mkdir -p /tmp/fonts"
  - "mkdir -p /tmp/fonts/SpaceMono"
  - "cd /tmp/fonts/SpaceMono"
  - "FONT_URL=$(curl -s https://api.github.com/repos/ryanoasis/nerd-fonts/releases/latest | grep 'browser_download_url.*SpaceMono.tar.xz' | cut -d '"' -f 4)"
  - "curl $FONT_URL -fLo ./SpaceMono.tar.xz"
  - "tar -xf SpaceMono.tar.xz"
  - "rm SpaceMono.tar.xz"
  - "mkdir -p /tmp/fonts/0xProto"
  - "cd /tmp/fonts/0xProto"
  - "FONT_URL=$(curl -s https://api.github.com/repos/ryanoasis/nerd-fonts/releases/latest | grep 'browser_download_url.*0xProto.tar.xz' | cut -d '"' -f 4)"
  - "curl $FONT_URL -fLo ./0xProto.tar.xz"
  - "tar -xf 0xProto.tar.xz"
  - "rm 0xProto.tar.xz"
  - "mkdir -p /tmp/fonts/Meslo"
  - "cd /tmp/fonts/Meslo"
  - "FONT_URL=$(curl -s https://api.github.com/repos/ryanoasis/nerd-fonts/releases/latest | grep 'browser_download_url.*Meslo.tar.xz' | cut -d '"' -f 4)"
  - "curl $FONT_URL -fLo ./Meslo.tar.xz"
  - "tar -xf Meslo.tar.xz"
  - "rm Meslo.tar.xz"
  - "mkdir -p /tmp/fonts/SauceCodePro"
  - "cd /tmp/fonts/SauceCodePro"
  - "FONT_URL=$(curl -s https://api.github.com/repos/ryanoasis/nerd-fonts/releases/latest | grep 'browser_download_url.*SourceCodePro.tar.xz' | cut -d '"' -f 4)"
  - "curl $FONT_URL -fLo ./SourceCodePro.tar.xz"
  - "tar -xf SourceCodePro.tar.xz"
  - "rm SourceCodePro.tar.xz"
  - "mv /tmp/fonts/* /usr/local/share/fonts/opentype/"
  - "fc-cache -f -v"
